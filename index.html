<!doctype html>
<html>
<header>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</header>
<body>
  <section class="hero is-info is-fullheight">
    <div class="hero-body">
      <div class="container has-text-centered">
        <div class="field has-addons">
          <div class="control">
            <input class="input is-large" id="link_input" type="text" placeholder="Pegue link de iconnect" />
          </div>
          <div class="control">
            <button class="button is-large is-primary">
              <img class="image is-24x24" src="clippy.svg" alt="Copy to clipboard">
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    function makemylink() {
      const linkInput = document.getElementById('link_input');

      const result = document.getElementById('result');

      const parsedUrl = new URL(linkInput.value);
      const listingKey = parsedUrl.searchParams.get('ListingKey');
      let url=`http://www.remax.com.ec/PublicListingFull.aspx?SAgentID=_x0039_XYBMrMODnyTz_x002B_qe2YC1lHzNkzk2cPfXp6joTocl2YDM6HzqMxcOlblFOm_x002F_oFCjmQniO0fnNQr9R0i7yaMdoOTOUboFOHO1vfp6j16T_x002B_d94_x003D_&lKey=${listingKey}`;

      if (!listingKey) {
        url = 'Try again';
      }

      return url;
    }

    $(document).ready(function() {
      new Clipboard('.button', {
        text: function(trigger) {
          return makemylink();
        }
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/clipboard.js/1.5.3/clipboard.min.js"></script>
</body>
</html>
